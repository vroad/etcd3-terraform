{
    "ignition": {
        "config": {},
        "security": {
            "tls": {}
        },
        "timeouts": {},
        "version": "2.2.0"
    },
    "networkd": {},
    "passwd": {},
    "storage": {
        "files": [
            {
                "filesystem": "root",
                "path": "/etc/kubernetes/pki/etcd/ca.crt",
                "contents": {
                    "source": "s3://${s3_bucket}/certs/ca.crt",
                    "verification": {}
                },
                "mode": 420
            },
            {
                "filesystem": "root",
                "path": "/etc/kubernetes/pki/apiserver-etcd-client.crt",
                "contents": {
                    "source": "s3://${s3_bucket}/certs/${host}/apiserver-etcd-client.crt",
                    "verification": {}
                },
                "mode": 420
            },
            {
                "filesystem": "root",
                "path": "/etc/kubernetes/pki/apiserver-etcd-client.key",
                "contents": {
                    "source": "s3://${s3_bucket}/certs/${host}/apiserver-etcd-client.key",
                    "verification": {}
                },
                "mode": 420
            },
            {
                "filesystem": "root",
                "path": "/etc/kubernetes/pki/etcd/healthcheck-client.crt",
                "contents": {
                    "source": "s3://${s3_bucket}/certs/${host}/healthcheck-client.crt",
                    "verification": {}
                },
                "mode": 420
            },
            {
                "filesystem": "root",
                "path": "/etc/kubernetes/pki/etcd/healthcheck-client.key",
                "contents": {
                    "source": "s3://${s3_bucket}/certs/${host}/healthcheck-client.key",
                    "verification": {}
                },
                "mode": 420
            },
            {
                "filesystem": "root",
                "path": "/etc/kubernetes/pki/etcd/peer.crt",
                "contents": {
                    "source": "s3://${s3_bucket}/certs/${host}/peer.crt",
                    "verification": {}
                },
                "mode": 420
            },
            {
                "filesystem": "root",
                "path": "/etc/kubernetes/pki/etcd/peer.key",
                "contents": {
                    "source": "s3://${s3_bucket}/certs/${host}/peer.key",
                    "verification": {}
                },
                "mode": 420
            },
            {
                "filesystem": "root",
                "path": "/etc/kubernetes/pki/etcd/server.crt",
                "contents": {
                    "source": "s3://${s3_bucket}/certs/${host}/server.crt",
                    "verification": {}
                },
                "mode": 420
            },
            {
                "filesystem": "root",
                "path": "/etc/kubernetes/pki/etcd/server.key",
                "contents": {
                    "source": "s3://${s3_bucket}/certs/${host}/server.key",
                    "verification": {}
                },
                "mode": 420
            }
        ]
    },
    "systemd": {
        "units": [
            {
                "name": "locksmithd.service",
                "enable": false,
                "mask": true
            },
            {
                "name": "etcd-bootstrap.service",
                "enable": true,
                "contents": ${jsonencode(etcd_bootstrap_unit)
                }
            },
            {
                "name": "ntpdate.service",
                "enable": true,
                "contents": ${jsonencode(ntpdate_unit)
                }
            },
            {
                "name": "ntpdate.timer",
                "enable": true,
                "contents": ${jsonencode(ntpdate_timer_unit)
                }
            }
        ]
    }
}